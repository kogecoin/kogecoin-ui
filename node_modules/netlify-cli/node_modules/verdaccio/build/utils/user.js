"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GENERIC_AVATAR = void 0;
exports.generateGravatarUrl = generateGravatarUrl;

var _lodash = _interopRequireDefault(require("lodash"));

var _cryptoUtils = require("../lib/crypto-utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// @flow
// this is a generic avatar
// https://www.iconfinder.com/icons/403017/anonym_avatar_default_head_person_unknown_user_icon
// license: free commercial usage
const GENERIC_AVATAR = 'data:image/svg+xml;utf8,' + encodeURIComponent('<svg height="100" viewBox="-27 24 100 100" width="100" xmlns="http://www.w3.org/' + '2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><circle cx="23" cy="7' + '4" id="a" r="50"/></defs><use fill="#F5EEE5" overflow="visible" xlink:href="#a"/' + '><clipPath id="b"><use overflow="visible" xlink:href="#a"/></clipPath><g clip-pa' + 'th="url(#b)"><defs><path d="M36 95.9c0 4 4.7 5.2 7.1 5.8 7.6 2 22.8 5.9 22.8 5.9' + ' 3.2 1.1 5.7 3.5 7.1 6.6v9.8H-27v-9.8c1.3-3.1 3.9-5.5 7.1-6.6 0 0 15.2-3.9 22.8-' + '5.9 2.4-.6 7.1-1.8 7.1-5.8V85h26v10.9z" id="c"/></defs><use fill="#E6C19C" overf' + 'low="visible" xlink:href="#c"/><clipPath id="d"><use overflow="visible" xlink:hr' + 'ef="#c"/></clipPath><path clip-path="url(#d)" d="M23.2 35h.2c3.3 0 8.2.2 11.4 2 ' + '3.3 1.9 7.3 5.6 8.5 12.1 2.4 13.7-2.1 35.4-6.3 42.4-4 6.7-9.8 9.2-13.5 9.4H23h-.' + '1c-3.7-.2-9.5-2.7-13.5-9.4-4.2-7-8.7-28.7-6.3-42.4 1.2-6.5 5.2-10.2 8.5-12.1 3.2' + '-1.8 8.1-2 11.4-2h.2z" fill="#D4B08C"/></g><path d="M22.6 40c19.1 0 20.7 13.8 20' + '.8 15.1 1.1 11.9-3 28.1-6.8 33.7-4 5.9-9.8 8.1-13.5 8.3h-.5c-3.8-.3-9.6-2.5-13.6' + '-8.4-3.8-5.6-7.9-21.8-6.8-33.8C2.3 53.7 3.5 40 22.6 40z" fill="#F2CEA5"/></svg>');
/**
 * Generate gravatar url from email address
 */

exports.GENERIC_AVATAR = GENERIC_AVATAR;

function generateGravatarUrl(email = '', online = true) {
  if (online && _lodash.default.isString(email) && _lodash.default.size(email) > 0) {
    email = email.trim().toLocaleLowerCase();
    const emailMD5 = (0, _cryptoUtils.stringToMD5)(email);
    return `https://www.gravatar.com/avatar/${emailMD5}`;
  }

  return GENERIC_AVATAR;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy91c2VyLnRzIl0sIm5hbWVzIjpbIkdFTkVSSUNfQVZBVEFSIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2VuZXJhdGVHcmF2YXRhclVybCIsImVtYWlsIiwib25saW5lIiwiXyIsImlzU3RyaW5nIiwic2l6ZSIsInRyaW0iLCJ0b0xvY2FsZUxvd2VyQ2FzZSIsImVtYWlsTUQ1Il0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBOztBQUVBOzs7O0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDTyxNQUFNQSxjQUFjLEdBQ3pCLDZCQUNBQyxrQkFBa0IsQ0FDaEIscUZBQ0Usa0ZBREYsR0FFRSxrRkFGRixHQUdFLGtGQUhGLEdBSUUsa0ZBSkYsR0FLRSxrRkFMRixHQU1FLGtGQU5GLEdBT0Usa0ZBUEYsR0FRRSxrRkFSRixHQVNFLGtGQVRGLEdBVUUsa0ZBVkYsR0FXRSxrRkFYRixHQVlFLGtGQVpGLEdBYUUsaUZBZGMsQ0FGYjtBQW1CUDtBQUNBO0FBQ0E7Ozs7QUFDTyxTQUFTQyxtQkFBVCxDQUE2QkMsS0FBb0IsR0FBRyxFQUFwRCxFQUF3REMsTUFBZSxHQUFHLElBQTFFLEVBQXdGO0FBQzdGLE1BQUlBLE1BQU0sSUFBSUMsZ0JBQUVDLFFBQUYsQ0FBV0gsS0FBWCxDQUFWLElBQStCRSxnQkFBRUUsSUFBRixDQUFPSixLQUFQLElBQWdCLENBQW5ELEVBQXNEO0FBQ3BEQSxJQUFBQSxLQUFLLEdBQUdBLEtBQUssQ0FBQ0ssSUFBTixHQUFhQyxpQkFBYixFQUFSO0FBQ0EsVUFBTUMsUUFBUSxHQUFHLDhCQUFZUCxLQUFaLENBQWpCO0FBQ0EsV0FBUSxtQ0FBa0NPLFFBQVMsRUFBbkQ7QUFDRDs7QUFDRCxTQUFPVixjQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgc3RyaW5nVG9NRDUgfSBmcm9tICcuLi9saWIvY3J5cHRvLXV0aWxzJztcblxuLy8gdGhpcyBpcyBhIGdlbmVyaWMgYXZhdGFyXG4vLyBodHRwczovL3d3dy5pY29uZmluZGVyLmNvbS9pY29ucy80MDMwMTcvYW5vbnltX2F2YXRhcl9kZWZhdWx0X2hlYWRfcGVyc29uX3Vua25vd25fdXNlcl9pY29uXG4vLyBsaWNlbnNlOiBmcmVlIGNvbW1lcmNpYWwgdXNhZ2VcbmV4cG9ydCBjb25zdCBHRU5FUklDX0FWQVRBUiA9XG4gICdkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCwnICtcbiAgZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICc8c3ZnIGhlaWdodD1cIjEwMFwiIHZpZXdCb3g9XCItMjcgMjQgMTAwIDEwMFwiIHdpZHRoPVwiMTAwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8nICtcbiAgICAgICcyMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPjxkZWZzPjxjaXJjbGUgY3g9XCIyM1wiIGN5PVwiNycgK1xuICAgICAgJzRcIiBpZD1cImFcIiByPVwiNTBcIi8+PC9kZWZzPjx1c2UgZmlsbD1cIiNGNUVFRTVcIiBvdmVyZmxvdz1cInZpc2libGVcIiB4bGluazpocmVmPVwiI2FcIi8nICtcbiAgICAgICc+PGNsaXBQYXRoIGlkPVwiYlwiPjx1c2Ugb3ZlcmZsb3c9XCJ2aXNpYmxlXCIgeGxpbms6aHJlZj1cIiNhXCIvPjwvY2xpcFBhdGg+PGcgY2xpcC1wYScgK1xuICAgICAgJ3RoPVwidXJsKCNiKVwiPjxkZWZzPjxwYXRoIGQ9XCJNMzYgOTUuOWMwIDQgNC43IDUuMiA3LjEgNS44IDcuNiAyIDIyLjggNS45IDIyLjggNS45JyArXG4gICAgICAnIDMuMiAxLjEgNS43IDMuNSA3LjEgNi42djkuOEgtMjd2LTkuOGMxLjMtMy4xIDMuOS01LjUgNy4xLTYuNiAwIDAgMTUuMi0zLjkgMjIuOC0nICtcbiAgICAgICc1LjkgMi40LS42IDcuMS0xLjggNy4xLTUuOFY4NWgyNnYxMC45elwiIGlkPVwiY1wiLz48L2RlZnM+PHVzZSBmaWxsPVwiI0U2QzE5Q1wiIG92ZXJmJyArXG4gICAgICAnbG93PVwidmlzaWJsZVwiIHhsaW5rOmhyZWY9XCIjY1wiLz48Y2xpcFBhdGggaWQ9XCJkXCI+PHVzZSBvdmVyZmxvdz1cInZpc2libGVcIiB4bGluazpocicgK1xuICAgICAgJ2VmPVwiI2NcIi8+PC9jbGlwUGF0aD48cGF0aCBjbGlwLXBhdGg9XCJ1cmwoI2QpXCIgZD1cIk0yMy4yIDM1aC4yYzMuMyAwIDguMi4yIDExLjQgMiAnICtcbiAgICAgICczLjMgMS45IDcuMyA1LjYgOC41IDEyLjEgMi40IDEzLjctMi4xIDM1LjQtNi4zIDQyLjQtNCA2LjctOS44IDkuMi0xMy41IDkuNEgyM2gtLicgK1xuICAgICAgJzFjLTMuNy0uMi05LjUtMi43LTEzLjUtOS40LTQuMi03LTguNy0yOC43LTYuMy00Mi40IDEuMi02LjUgNS4yLTEwLjIgOC41LTEyLjEgMy4yJyArXG4gICAgICAnLTEuOCA4LjEtMiAxMS40LTJoLjJ6XCIgZmlsbD1cIiNENEIwOENcIi8+PC9nPjxwYXRoIGQ9XCJNMjIuNiA0MGMxOS4xIDAgMjAuNyAxMy44IDIwJyArXG4gICAgICAnLjggMTUuMSAxLjEgMTEuOS0zIDI4LjEtNi44IDMzLjctNCA1LjktOS44IDguMS0xMy41IDguM2gtLjVjLTMuOC0uMy05LjYtMi41LTEzLjYnICtcbiAgICAgICctOC40LTMuOC01LjYtNy45LTIxLjgtNi44LTMzLjhDMi4zIDUzLjcgMy41IDQwIDIyLjYgNDB6XCIgZmlsbD1cIiNGMkNFQTVcIi8+PC9zdmc+J1xuICApO1xuXG4vKipcbiAqIEdlbmVyYXRlIGdyYXZhdGFyIHVybCBmcm9tIGVtYWlsIGFkZHJlc3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlR3JhdmF0YXJVcmwoZW1haWw6IHN0cmluZyB8IHZvaWQgPSAnJywgb25saW5lOiBib29sZWFuID0gdHJ1ZSk6IHN0cmluZyB7XG4gIGlmIChvbmxpbmUgJiYgXy5pc1N0cmluZyhlbWFpbCkgJiYgXy5zaXplKGVtYWlsKSA+IDApIHtcbiAgICBlbWFpbCA9IGVtYWlsLnRyaW0oKS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IGVtYWlsTUQ1ID0gc3RyaW5nVG9NRDUoZW1haWwpO1xuICAgIHJldHVybiBgaHR0cHM6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci8ke2VtYWlsTUQ1fWA7XG4gIH1cbiAgcmV0dXJuIEdFTkVSSUNfQVZBVEFSO1xufVxuIl19