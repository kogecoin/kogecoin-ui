"use strict";

var _clipanion = require("clipanion");

var _info = require("./commands/info");

var _init = require("./commands/init");

var _version = require("./commands/version");

var _utils = require("./utils");

require('pkginfo')(module);

const pkgVersion = module.exports.version;

if (process.getuid && process.getuid() === 0) {
  process.emitWarning(`Verdaccio doesn't need superuser privileges. don't run it under root`);
}

if (!(0, _utils.isVersionValid)(process.version)) {
  throw new Error(`Verdaccio requires at least Node.js v${_utils.MIN_NODE_VERSION} or higher and you have installed ${process.version}, 
    please upgrade your Node.js distribution`);
}

const [node, app, ...args] = process.argv;
const cli = new _clipanion.Cli({
  binaryLabel: `verdaccio`,
  binaryName: `${node} ${app}`,
  binaryVersion: pkgVersion
});
cli.register(_info.InfoCommand);
cli.register(_init.InitCommand);
cli.register(_version.VersionCommand);
cli.runExit(args, _clipanion.Cli.defaultContext);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvY2xpL2NsaS50cyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwibW9kdWxlIiwicGtnVmVyc2lvbiIsImV4cG9ydHMiLCJ2ZXJzaW9uIiwicHJvY2VzcyIsImdldHVpZCIsImVtaXRXYXJuaW5nIiwiRXJyb3IiLCJNSU5fTk9ERV9WRVJTSU9OIiwibm9kZSIsImFwcCIsImFyZ3MiLCJhcmd2IiwiY2xpIiwiQ2xpIiwiYmluYXJ5TGFiZWwiLCJiaW5hcnlOYW1lIiwiYmluYXJ5VmVyc2lvbiIsInJlZ2lzdGVyIiwiSW5mb0NvbW1hbmQiLCJJbml0Q29tbWFuZCIsIlZlcnNpb25Db21tYW5kIiwicnVuRXhpdCIsImRlZmF1bHRDb250ZXh0Il0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUVBQSxPQUFPLENBQUMsU0FBRCxDQUFQLENBQW1CQyxNQUFuQjs7QUFDQSxNQUFNQyxVQUFVLEdBQUdELE1BQU0sQ0FBQ0UsT0FBUCxDQUFlQyxPQUFsQzs7QUFFQSxJQUFJQyxPQUFPLENBQUNDLE1BQVIsSUFBa0JELE9BQU8sQ0FBQ0MsTUFBUixPQUFxQixDQUEzQyxFQUE4QztBQUM1Q0QsRUFBQUEsT0FBTyxDQUFDRSxXQUFSLENBQXFCLHNFQUFyQjtBQUNEOztBQUVELElBQUksQ0FBQywyQkFBZUYsT0FBTyxDQUFDRCxPQUF2QixDQUFMLEVBQXNDO0FBQ3BDLFFBQU0sSUFBSUksS0FBSixDQUNILHdDQUF1Q0MsdUJBQWlCLHFDQUFvQ0osT0FBTyxDQUFDRCxPQUFRO0FBQ2pILDZDQUZRLENBQU47QUFJRDs7QUFFRCxNQUFNLENBQUNNLElBQUQsRUFBT0MsR0FBUCxFQUFZLEdBQUdDLElBQWYsSUFBdUJQLE9BQU8sQ0FBQ1EsSUFBckM7QUFFQSxNQUFNQyxHQUFHLEdBQUcsSUFBSUMsY0FBSixDQUFRO0FBQ2xCQyxFQUFBQSxXQUFXLEVBQUcsV0FESTtBQUVsQkMsRUFBQUEsVUFBVSxFQUFHLEdBQUVQLElBQUssSUFBR0MsR0FBSSxFQUZUO0FBR2xCTyxFQUFBQSxhQUFhLEVBQUVoQjtBQUhHLENBQVIsQ0FBWjtBQU1BWSxHQUFHLENBQUNLLFFBQUosQ0FBYUMsaUJBQWI7QUFDQU4sR0FBRyxDQUFDSyxRQUFKLENBQWFFLGlCQUFiO0FBQ0FQLEdBQUcsQ0FBQ0ssUUFBSixDQUFhRyx1QkFBYjtBQUNBUixHQUFHLENBQUNTLE9BQUosQ0FBWVgsSUFBWixFQUFrQkcsZUFBSVMsY0FBdEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGkgfSBmcm9tICdjbGlwYW5pb24nO1xuXG5pbXBvcnQgeyBJbmZvQ29tbWFuZCB9IGZyb20gJy4vY29tbWFuZHMvaW5mbyc7XG5pbXBvcnQgeyBJbml0Q29tbWFuZCB9IGZyb20gJy4vY29tbWFuZHMvaW5pdCc7XG5pbXBvcnQgeyBWZXJzaW9uQ29tbWFuZCB9IGZyb20gJy4vY29tbWFuZHMvdmVyc2lvbic7XG5pbXBvcnQgeyBNSU5fTk9ERV9WRVJTSU9OLCBpc1ZlcnNpb25WYWxpZCB9IGZyb20gJy4vdXRpbHMnO1xuXG5yZXF1aXJlKCdwa2dpbmZvJykobW9kdWxlKTtcbmNvbnN0IHBrZ1ZlcnNpb24gPSBtb2R1bGUuZXhwb3J0cy52ZXJzaW9uO1xuXG5pZiAocHJvY2Vzcy5nZXR1aWQgJiYgcHJvY2Vzcy5nZXR1aWQoKSA9PT0gMCkge1xuICBwcm9jZXNzLmVtaXRXYXJuaW5nKGBWZXJkYWNjaW8gZG9lc24ndCBuZWVkIHN1cGVydXNlciBwcml2aWxlZ2VzLiBkb24ndCBydW4gaXQgdW5kZXIgcm9vdGApO1xufVxuXG5pZiAoIWlzVmVyc2lvblZhbGlkKHByb2Nlc3MudmVyc2lvbikpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgIGBWZXJkYWNjaW8gcmVxdWlyZXMgYXQgbGVhc3QgTm9kZS5qcyB2JHtNSU5fTk9ERV9WRVJTSU9OfSBvciBoaWdoZXIgYW5kIHlvdSBoYXZlIGluc3RhbGxlZCAke3Byb2Nlc3MudmVyc2lvbn0sIFxuICAgIHBsZWFzZSB1cGdyYWRlIHlvdXIgTm9kZS5qcyBkaXN0cmlidXRpb25gXG4gICk7XG59XG5cbmNvbnN0IFtub2RlLCBhcHAsIC4uLmFyZ3NdID0gcHJvY2Vzcy5hcmd2O1xuXG5jb25zdCBjbGkgPSBuZXcgQ2xpKHtcbiAgYmluYXJ5TGFiZWw6IGB2ZXJkYWNjaW9gLFxuICBiaW5hcnlOYW1lOiBgJHtub2RlfSAke2FwcH1gLFxuICBiaW5hcnlWZXJzaW9uOiBwa2dWZXJzaW9uLFxufSk7XG5cbmNsaS5yZWdpc3RlcihJbmZvQ29tbWFuZCk7XG5jbGkucmVnaXN0ZXIoSW5pdENvbW1hbmQpO1xuY2xpLnJlZ2lzdGVyKFZlcnNpb25Db21tYW5kKTtcbmNsaS5ydW5FeGl0KGFyZ3MsIENsaS5kZWZhdWx0Q29udGV4dCk7XG4iXX0=