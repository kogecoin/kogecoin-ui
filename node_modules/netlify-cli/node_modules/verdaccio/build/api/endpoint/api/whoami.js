"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

function _default(route) {
  route.get('/whoami', (req, res, next) => {
    if (req.get('referer') === 'whoami') {
      next({
        username: req.remote_user.name
      });
    } else {
      next('route');
    }
  });
  route.get('/-/whoami', (req, res, next) => {
    next({
      username: req.remote_user.name
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hcGkvZW5kcG9pbnQvYXBpL3dob2FtaS50cyJdLCJuYW1lcyI6WyJyb3V0ZSIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJ1c2VybmFtZSIsInJlbW90ZV91c2VyIiwibmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUllLGtCQUFVQSxLQUFWLEVBQStCO0FBQzVDQSxFQUFBQSxLQUFLLENBQUNDLEdBQU4sQ0FBVSxTQUFWLEVBQXFCLENBQUNDLEdBQUQsRUFBc0JDLEdBQXRCLEVBQXFDQyxJQUFyQyxLQUFzRTtBQUN6RixRQUFJRixHQUFHLENBQUNELEdBQUosQ0FBUSxTQUFSLE1BQXVCLFFBQTNCLEVBQXFDO0FBQ25DRyxNQUFBQSxJQUFJLENBQUM7QUFBRUMsUUFBQUEsUUFBUSxFQUFFSCxHQUFHLENBQUNJLFdBQUosQ0FBZ0JDO0FBQTVCLE9BQUQsQ0FBSjtBQUNELEtBRkQsTUFFTztBQUNMSCxNQUFBQSxJQUFJLENBQUMsT0FBRCxDQUFKO0FBQ0Q7QUFDRixHQU5EO0FBUUFKLEVBQUFBLEtBQUssQ0FBQ0MsR0FBTixDQUFVLFdBQVYsRUFBdUIsQ0FBQ0MsR0FBRCxFQUFzQkMsR0FBdEIsRUFBcUNDLElBQXJDLEtBQXFFO0FBQzFGQSxJQUFBQSxJQUFJLENBQUM7QUFBRUMsTUFBQUEsUUFBUSxFQUFFSCxHQUFHLENBQUNJLFdBQUosQ0FBZ0JDO0FBQTVCLEtBQUQsQ0FBSjtBQUNELEdBRkQ7QUFHRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc3BvbnNlLCBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcblxuaW1wb3J0IHsgJE5leHRGdW5jdGlvblZlciwgJFJlcXVlc3RFeHRlbmQgfSBmcm9tICcuLi8uLi8uLi8uLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChyb3V0ZTogUm91dGVyKTogdm9pZCB7XG4gIHJvdXRlLmdldCgnL3dob2FtaScsIChyZXE6ICRSZXF1ZXN0RXh0ZW5kLCByZXM6IFJlc3BvbnNlLCBuZXh0OiAkTmV4dEZ1bmN0aW9uVmVyKTogdm9pZCA9PiB7XG4gICAgaWYgKHJlcS5nZXQoJ3JlZmVyZXInKSA9PT0gJ3dob2FtaScpIHtcbiAgICAgIG5leHQoeyB1c2VybmFtZTogcmVxLnJlbW90ZV91c2VyLm5hbWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5leHQoJ3JvdXRlJyk7XG4gICAgfVxuICB9KTtcblxuICByb3V0ZS5nZXQoJy8tL3dob2FtaScsIChyZXE6ICRSZXF1ZXN0RXh0ZW5kLCByZXM6IFJlc3BvbnNlLCBuZXh0OiAkTmV4dEZ1bmN0aW9uVmVyKTogYW55ID0+IHtcbiAgICBuZXh0KHsgdXNlcm5hbWU6IHJlcS5yZW1vdGVfdXNlci5uYW1lIH0pO1xuICB9KTtcbn1cbiJdfQ==