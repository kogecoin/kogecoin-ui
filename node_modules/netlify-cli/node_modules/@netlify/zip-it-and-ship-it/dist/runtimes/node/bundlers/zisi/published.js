"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getPublishedFiles = void 0;
const util_1 = require("util");
const glob_1 = __importDefault(require("glob"));
const pGlob = (0, util_1.promisify)(glob_1.default);
// We use all the files published by the Node.js except some that are not needed
const getPublishedFiles = async function (modulePath) {
    const ignore = getIgnoredFiles(modulePath);
    const publishedFiles = await pGlob(`${modulePath}/**`, {
        ignore,
        nodir: true,
        absolute: true,
        dot: true,
    });
    return publishedFiles;
};
exports.getPublishedFiles = getPublishedFiles;
const getIgnoredFiles = function (modulePath) {
    return IGNORED_FILES.map((ignoreFile) => `${modulePath}/${ignoreFile}`);
};
// To make the zip archive smaller, we remove those.
const IGNORED_FILES = [
    'node_modules/**',
    '.npmignore',
    'package-lock.json',
    'yarn.lock',
    '*.log',
    '*.lock',
    '*~',
    '*.map',
    '*.ts',
    '*.patch',
];
//# sourceMappingURL=published.js.map